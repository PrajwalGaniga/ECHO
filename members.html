<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Members Directory - ECHO</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- AOS for animations -->
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <!-- Hover.css for hover effects -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hover.css/2.3.1/css/hover-min.css">

    <style>
        /* --- THEME & COLOR VARIABLES --- */
        :root { /* Light Mode Defaults */
            --background-color: #f4f4f9;
            --surface-color: #ffffff;
            --surface-secondary-color: #f8f9fa;
            --text-color: #1c1c1e;
            --text-muted-color: #6a6a6e;
            --border-color: #e5e5e5;
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --core-member-glow: rgba(139, 92, 246, 0.4);
            --card-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            --gradient-text: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            --nav-background: rgba(255, 255, 255, 0.8);
        }

        [data-theme="dark"] {
            --background-color: #121212;
            --surface-color: #1e1e1e;
            --surface-secondary-color: #2a2a2a;
            --text-color: #e0e0e0;
            --text-muted-color: #a0a0a0;
            --border-color: #333333;
            --primary-color: #6a11cb;
            --secondary-color: #2575fc;
            --core-member-glow: rgba(173, 113, 255, 0.3);
            --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            --nav-background: rgba(18, 18, 18, 0.8);
        }

        /* --- BASE STYLES --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        main { padding-top: 80px; /* Account for fixed navbar */ }

        /* --- NAVIGATION BAR (Consistent with index.html) --- */
        .navbar {
            background: var(--nav-background); backdrop-filter: blur(10px);
            padding: 15px 0; position: fixed; width: 100%; top: 0; left: 0;
            z-index: 1000; border-bottom: 1px solid var(--border-color);
        }
        .nav-container { display: flex; justify-content: space-between; align-items: center; }
        .nav-logo { display: flex; align-items: center; gap: 10px; text-decoration: none; }
        .logo-img { width: 60px; height: 60px; border-radius: 8px; }
        .logo-text {
            font-size: 1.8rem; font-weight: 700; background: var(--gradient-text);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .nav-menu { display: flex; list-style: none; gap: 30px; margin: 0; }
        .nav-link {
            color: var(--text-muted-color); text-decoration: none; position: relative;
            padding-bottom: 5px; transition: color 0.3s ease;
        }
        .nav-link::after {
            content: ''; position: absolute; bottom: 0; left: 0;
            width: 0; height: 2px; background: var(--gradient-text);
            transition: width 0.3s ease;
        }
        .nav-link:hover, .nav-link.active { color: var(--text-color); }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; }
        .theme-toggle button {
            background: transparent; border: none; cursor: pointer;
            font-size: 1.5rem; color: var(--text-muted-color);
            transition: transform 0.3s, color 0.3s;
        }
        .theme-toggle button:hover { transform: scale(1.2); color: var(--text-color); }
        .hamburger { display: none; cursor: pointer; }
        .hamburger span {
            display: block; width: 25px; height: 3px; margin: 5px 0;
            background: var(--text-color); transition: 0.4s;
        }

        /* --- PAGE HEADER --- */
        .page-header {
            text-align: center;
            padding: 40px 0;
        }
        .page-title {
            font-size: 2.8rem; font-weight: 700;
            background: var(--gradient-text);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .page-subtitle { color: var(--text-muted-color); font-size: 1.1rem; }

        /* --- FILTERS SECTION --- */
        .filters-section {
            padding: 30px 0;
            background-color: var(--surface-color);
            border-top: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
            position: sticky; top: 73px; z-index: 100;
        }
        .filters-container { display: grid; grid-template-columns: 1fr; gap: 20px; }
        .search-box { position: relative; }
        .search-box input, .filter-controls select, .reset-btn {
            width: 100%; padding: 12px 20px; font-size: 1rem;
            border-radius: 8px; border: 1px solid var(--border-color);
            background-color: var(--surface-secondary-color); color: var(--text-color);
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .search-box input:focus, .filter-controls select:focus {
            outline: none; border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(37, 117, 252, 0.3);
        }
        .search-box input { padding-left: 45px; }
        .search-icon { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: var(--text-muted-color); }
        .filter-controls { display: flex; flex-wrap: wrap; gap: 15px; }
        .filter-controls > * { flex: 1 1 180px; }
        .reset-btn {
            cursor: pointer; background-color: var(--surface-color); color: var(--text-color);
            font-weight: 600; text-align: center;
        }
        .reset-btn:hover { border-color: var(--text-muted-color); }
        .member-stats { margin-top: 15px; color: var(--text-muted-color); font-weight: 500; }

        /* --- IMPROVED MEMBERS GRID & CARDS --- */
        .members-grid-section { padding: 50px 0; }
        .members-grid {
            display: grid; gap: 25px;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        }
        .member-card {
            background-color: var(--surface-color); 
            border-radius: 16px; 
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative; 
            opacity: 0;
            box-shadow: var(--card-shadow);
            border: none;
        }
        .member-card.is-core { 
            box-shadow: 0 0 20px var(--core-member-glow);
            position: relative;
        }
        .member-card.is-core::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-text);
            z-index: 1;
        }
        .core-badge {
            position: absolute; 
            top: 15px; 
            right: 15px; 
            font-size: 1.5rem;
            filter: drop-shadow(0 0 5px rgba(255, 223, 0, 0.7));
            z-index: 2;
        }
        .card-content {
            padding: 20px;
            position: relative;
        }
        .member-avatar {
            width: 100px;
            height: 100px;
            margin: 0 auto 16px;
            position: relative;
        }
        .member-avatar img {
            width: 100%; 
            height: 100%; 
            border-radius: 50%; 
            object-fit: cover;
            border: 4px solid var(--primary-color);
            transition: all 0.3s ease;
        }
        .member-name { 
            font-size: 1.3rem; 
            font-weight: 700; 
            margin-bottom: 4px; 
            text-align: center;
        }
        .member-usn {
            font-family: 'Roboto Mono', monospace; 
            font-size: 0.85rem;
            color: var(--text-muted-color); 
            margin-bottom: 8px;
            text-align: center;
        }
        .member-year {
            font-size: 0.9rem; 
            font-weight: 500; 
            color: var(--secondary-color);
            margin-bottom: 16px; 
            background: var(--surface-secondary-color);
            display: inline-block; 
            padding: 4px 12px; 
            border-radius: 20px;
            text-align: center;
            width: 100%;
        }
        .member-tags { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 8px; 
            justify-content: center; 
            margin-bottom: 20px; 
        }
        .tag {
            font-size: 0.75rem; 
            padding: 6px 12px; 
            font-weight: 500;
            border-radius: 20px; 
            background-color: var(--surface-secondary-color);
            border: 1px solid var(--border-color);
            transition: all 0.2s ease;
        }
        .tag:hover {
            background-color: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }
        
        /* Contact Information Styles */
        .member-contact {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
            position: relative;
        }
        .contact-item {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            margin-bottom: 10px;
            font-size: 0.85rem;
            color: var(--text-muted-color);
            transition: all 0.3s ease;
        }
        .contact-icon {
            width: 20px;
            margin-right: 10px;
            color: var(--primary-color);
            text-align: center;
        }
        .contact-text {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .social-links {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 15px;
        }
        .social-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--surface-secondary-color);
            color: var(--text-color);
            transition: all 0.3s ease;
            text-decoration: none;
            font-size: 1.1rem;
        }
        .social-link:hover {
            transform: translateY(-3px) scale(1.1);
            background-color: var(--primary-color);
            color: white;
        }
        .linkedin:hover {
            background-color: #0A66C2;
        }
        .email:hover {
            background-color: #EA4335;
        }
        .phone:hover {
            background-color: #34A853;
        }
        
        .no-results { 
            text-align: center; 
            padding: 50px; 
            color: var(--text-muted-color); 
            grid-column: 1 / -1;
        }

        /* --- PAGINATION --- */
        .pagination-section { padding: 20px 0 50px; }
        .pagination { display: flex; justify-content: center; gap: 8px; }
        .pagination-btn {
            cursor: pointer; 
            padding: 10px 16px; 
            min-width: 40px;
            border-radius: 8px; 
            border: 1px solid var(--border-color);
            background-color: var(--surface-color); 
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .pagination-btn:hover { 
            background-color: var(--surface-secondary-color);
            transform: translateY(-2px);
        }
        .pagination-btn.active {
            background: var(--gradient-text); 
            color: white; 
            border-color: transparent;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        /* --- NEW STYLES FOR VIEW MORE BUTTON --- */
        .contact-hidden {
            display: none;
            animation: fadeIn 0.3s ease forwards;
        }
        .view-more-btn {
            cursor: pointer;
            margin: 15px auto 5px;
            padding: 8px 16px;
            background: var(--gradient-text);
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
            width: 100%;
        }
        .view-more-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .view-more-btn i {
            transition: transform 0.3s ease;
        }
        .view-more-btn.active i {
            transform: rotate(180deg);
        }
        
        /* Password Modal Styles */
        .password-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        .password-modal.active {
            display: flex;
            animation: fadeIn 0.3s ease forwards;
        }
        .password-form {
            background-color: var(--surface-color);
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 90%;
            max-width: 400px;
            text-align: center;
        }
        .password-form h3 {
            margin-bottom: 20px;
            color: var(--text-color);
        }
        .password-input {
            width: 100%;
            padding: 12px 16px;
            margin-bottom: 20px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background-color: var(--surface-secondary-color);
            color: var(--text-color);
            font-size: 1rem;
        }
        .password-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.3);
        }
        .password-submit {
            padding: 10px 20px;
            background: var(--gradient-text);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .password-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .password-cancel {
            padding: 10px 20px;
            background-color: var(--surface-secondary-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            margin-left: 10px;
            transition: all 0.3s ease;
        }
        .password-cancel:hover {
            background-color: var(--border-color);
        }
        
        /* --- RESPONSIVE DESIGN --- */
        @media (max-width: 768px) {
            main { padding-top: 73px; }
            .filters-section { position: static; }
            .nav-menu {
                display: none; position: absolute; top: 100%; left: 0; width: 100%;
                background: var(--nav-background); flex-direction: column;
                text-align: center; padding: 10px 0;
            }
            .nav-menu.active { display: flex; }
            .nav-menu li { padding: 15px 0; }
            .hamburger { display: block; }
            .hamburger.active span:nth-child(1) { transform: rotate(-45deg) translate(-5px, 6px); }
            .hamburger.active span:nth-child(2) { opacity: 0; }
            .hamburger.active span:nth-child(3) { transform: rotate(45deg) translate(-5px, -6px); }
            
            .members-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .password-form {
                padding: 20px;
                width: 85%;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container nav-container">
            <a href="index.html" class="nav-logo">
                <img src="logo.png" alt="ECHO Logo" class="logo-img">
                <span class="logo-text">ECHO</span>
            </a>
            <ul class="nav-menu" id="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="core.html" class="nav-link">Core Team</a></li>
                <li><a href="members.html" class="nav-link active">Members</a></li>
                
                <li><a href="events.html" class="nav-link">Events</a></li>
                <li><a href="gallery.html" class="nav-link">Gallery</a></li>
                <li><a href="about.html" class="nav-link">About</a></li>
                <li><a href="leaderboard.html" class="nav-link">Leaderboard</a></li>
            </ul>
            <div class="theme-toggle">
                <button id="theme-btn">🌙</button>
            </div>
            <div class="hamburger" id="hamburger">
                <span></span><span></span><span></span>
            </div>
        </div>
    </nav>

    <main>
        <section class="page-header">
            <div class="container">
                <h1 class="page-title">👥 Members Directory</h1>
                <p class="page-subtitle">Meet our amazing community of tech enthusiasts</p>
            </div>
        </section>

        <section class="filters-section">
            <div class="container">
                <div class="filters-container">
                    <div class="search-box">
                        <span class="search-icon">🔍</span>
                        <input type="text" id="search-input" placeholder="Search by name, USN, skill, or phone...">
                    </div>
                    <div class="filter-controls">
                        <select id="year-filter"><option value="">All Years</option></select>
                        <select id="skill-filter"><option value="">All Skills</option></select>
                        <select id="hobby-filter"><option value="">All Hobbies</option></select>
                        <button id="reset-filters" class="reset-btn">Reset Filters</button>
                    </div>
                </div>
                <div class="member-stats">
                    <span id="member-count"></span>
                </div>
            </div>
        </section>

        <section class="members-grid-section">
            <div class="container">
                <div class="members-grid" id="members-grid"></div>
                <div class="no-results" id="no-results" style="display: none;">
                    <h3>No members found matching your criteria.</h3>
                </div>
            </div>
        </section>

        <section class="pagination-section">
            <div class="container">
                <div class="pagination" id="pagination"></div>
            </div>
        </section>
    </main>

    <!-- Password Modal -->
    <div class="password-modal" id="password-modal">
        <div class="password-form">
            <h3>Enter Password to View Contact</h3>
            <input type="password" class="password-input" id="password-input" placeholder="Enter password">
            <div style="display: flex; justify-content: center; gap: 10px; margin-top: 20px;">
                <button class="password-submit" id="password-submit">Submit</button>
                <button class="password-cancel" id="password-cancel">Cancel</button>
            </div>
        </div>
    </div>

    <script src="members_data.js"></script>
    <!-- Vanilla Tilt.js for 3D tilt effects -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.0/vanilla-tilt.min.js"></script>
    <!-- AOS Script -->
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // Initialize AOS
        AOS.init({
            duration: 800,
            once: true,
            offset: 50
        });

        // --- 1. INITIAL SETUP & DOM ELEMENTS ---
        const searchInput = document.getElementById('search-input');
        const yearFilter = document.getElementById('year-filter');
        const skillFilter = document.getElementById('skill-filter');
        const hobbyFilter = document.getElementById('hobby-filter');
        const resetBtn = document.getElementById('reset-filters');
        const membersGrid = document.getElementById('members-grid');
        const memberCountSpan = document.getElementById('member-count');
        const paginationContainer = document.getElementById('pagination');
        const noResultsDiv = document.getElementById('no-results');
        
        // Password modal elements
        const passwordModal = document.getElementById('password-modal');
        const passwordInput = document.getElementById('password-input');
        const passwordSubmit = document.getElementById('password-submit');
        const passwordCancel = document.getElementById('password-cancel');

        // --- 2. THEME & NAVBAR LOGIC ---
        const themeBtn = document.getElementById('theme-btn');
        if (themeBtn) {
            const savedTheme = localStorage.getItem('echoTheme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            themeBtn.textContent = savedTheme === 'dark' ? '🌙' : '☀️';
            themeBtn.addEventListener('click', () => {
                const newTheme = (document.documentElement.getAttribute('data-theme') || 'dark') === 'dark' ? 'light' : 'dark';
                document.documentElement.setAttribute('data-theme', newTheme);
                themeBtn.textContent = newTheme === 'dark' ? '🌙' : '☀️';
                localStorage.setItem('echoTheme', newTheme);
            });
        }
        const hamburger = document.getElementById('hamburger');
        const navMenu = document.getElementById('nav-menu');
        if (hamburger && navMenu) {
            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
            });
        }

        // Note: Member data is now loaded from members_data.js

        let currentPage = 1;
        const itemsPerPage = 15;
        let currentMemberCard = null;

        // --- 4. DYNAMIC FILTER POPULATION ---
        function populateFilters() {
            const years = [...new Set(members.map(m => m.currentYear))].sort();
            const skills = [...new Set(members.flatMap(m => m.skills))].sort();
            const hobbies = [...new Set(members.flatMap(m => m.hobbies))].sort();

            years.forEach(y => yearFilter.innerHTML += `<option value="${y}">${y}</option>`);
            skills.forEach(s => skillFilter.innerHTML += `<option value="${s}">${s}</option>`);
            hobbies.forEach(h => hobbyFilter.innerHTML += `<option value="${h}">${h}</option>`);
        }

        // --- 5. CORE RENDER & FILTER LOGIC ---
        function applyFiltersAndRender() {
            const query = searchInput.value.toLowerCase();
            const year = yearFilter.value;
            const skill = skillFilter.value;
            const hobby = hobbyFilter.value;

            const filteredMembers = members.filter(member => {
                const matchesQuery = !query || 
                    member.name.toLowerCase().includes(query) || 
                    member.usn.toLowerCase().includes(query) || 
                    member.skills.some(s => s.toLowerCase().includes(query)) ||
                    member.phone.includes(query); // Search by phone number too
                const matchesYear = !year || member.currentYear === year;
                const matchesSkill = !skill || member.skills.includes(skill);
                const matchesHobby = !hobby || member.hobbies.includes(hobby);
                return matchesQuery && matchesYear && matchesSkill && matchesHobby;
            });

            renderPage(filteredMembers);
        }

        function renderPage(filteredList) {
            memberCountSpan.textContent = `Showing ${filteredList.length} of ${members.length} members`;
            noResultsDiv.style.display = filteredList.length === 0 ? 'block' : 'none';
            
            const totalPages = Math.ceil(filteredList.length / itemsPerPage);
            currentPage = Math.min(currentPage, totalPages || 1);
            
            const paginatedItems = filteredList.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);

            membersGrid.innerHTML = paginatedItems.map((member, index) => `
                <div class="member-card ${member.isCore ? 'is-core' : ''}" data-aos="fade-up" data-aos-delay="${index * 100}">
                    ${member.isCore ? '<div class="core-badge" title="Core Member">👑</div>' : ''}
                    <div class="card-content">
                        <div class="member-avatar">
                            <img src="${member.profilePic}" alt="${member.name}" loading="lazy" onerror="this.src='${defaultProfilePic}'">
                        </div>
                        <h3 class="member-name">${member.name}</h3>
                        <p class="member-usn">${member.usn}</p>
                        <p class="member-year">${member.currentYear}</p>
                        <div class="member-tags">
                            ${member.skills.slice(0, 3).map(s => `<span class="tag">${s}</span>`).join('')}
                        </div>
                        
                        <div class="member-contact">
                            <div class="social-links">
                                <a href="${member.linkedin}" target="_blank" class="social-link linkedin" title="LinkedIn">
                                    <i class="fab fa-linkedin-in"></i>
                                </a>
                            </div>
                            <button class="view-more-btn hvr-grow" data-member-id="${member.id}">
                                <span>View Contact Info</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="contact-hidden">
                                <div class="contact-item">
                                    <span class="contact-icon"><i class="fas fa-phone"></i></span>
                                    <span class="contact-text">${member.phone}</span>
                                </div>
                                <div class="contact-item">
                                    <span class="contact-icon"><i class="fas fa-envelope"></i></span>
                                    <span class="contact-text">${member.email}</span>
                                </div>
                                <div class="social-links">
                                    <a href="mailto:${member.email}" class="social-link email" title="Email">
                                        <i class="fas fa-envelope"></i>
                                    </a>
                                    <a href="tel:${member.phone}" class="social-link phone" title="Call">
                                        <i class="fas fa-phone"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            renderPagination(totalPages, filteredList);

            // Initialize Vanilla Tilt on newly rendered cards
            VanillaTilt.init(document.querySelectorAll(".member-card"), {
                max: 25,
                speed: 400,
                glare: true,
                "max-glare": 0.5
            });
        }

        function renderPagination(totalPages, fullList) {
            paginationContainer.innerHTML = '';
            if (totalPages <= 1) return;
            for (let i = 1; i <= totalPages; i++) {
                const btn = document.createElement('button');
                btn.className = `pagination-btn ${i === currentPage ? 'active' : ''}`;
                btn.textContent = i;
                btn.onclick = () => {
                    currentPage = i;
                    renderPage(fullList);
                    document.querySelector('.members-grid-section').scrollIntoView({ behavior: 'smooth' });
                };
                paginationContainer.appendChild(btn);
            }
        }

        // --- 6. EVENT LISTENERS ---
        [searchInput, yearFilter, skillFilter, hobbyFilter].forEach(el => el.addEventListener('input', () => {
            currentPage = 1;
            applyFiltersAndRender();
        }));

        resetBtn.addEventListener('click', () => {
            searchInput.value = '';
            yearFilter.value = '';
            skillFilter.value = '';
            hobbyFilter.value = '';
            currentPage = 1;
            applyFiltersAndRender();
        });

        // --- NEW: VIEW MORE BUTTON LOGIC WITH MODAL PASSWORD ---
        document.addEventListener('click', (e) => {
            if (e.target.closest('.view-more-btn')) {
                const button = e.target.closest('.view-more-btn');
                const hiddenDiv = button.nextElementSibling;
                
                if (hiddenDiv.style.display === 'block') {
                    // Hide contact info
                    hiddenDiv.style.display = 'none';
                    button.classList.remove('active');
                    button.querySelector('span').textContent = 'View Contact Info';
                } else {
                    // Show password modal
                    currentMemberCard = button;
                    passwordModal.classList.add('active');
                    passwordInput.focus();
                }
            }
        });

        // Password modal handlers
        passwordSubmit.addEventListener('click', () => {
            const pwd = passwordInput.value;
            if (pwd === 'admin') {
                const hiddenDiv = currentMemberCard.nextElementSibling;
                hiddenDiv.style.display = 'block';
                currentMemberCard.classList.add('active');
                currentMemberCard.querySelector('span').textContent = 'Hide Contact Info';
                passwordModal.classList.remove('active');
                passwordInput.value = '';
            } else {
                alert('Incorrect password!');
                passwordInput.value = '';
                passwordInput.focus();
            }
        });

        passwordCancel.addEventListener('click', () => {
            passwordModal.classList.remove('active');
            passwordInput.value = '';
        });

        // Close modal when clicking outside
        passwordModal.addEventListener('click', (e) => {
            if (e.target === passwordModal) {
                passwordModal.classList.remove('active');
                passwordInput.value = '';
            }
        });

        // Allow submitting with Enter key
        passwordInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                passwordSubmit.click();
            }
        });

        // --- 7. INITIALIZE PAGE ---
        populateFilters();
        applyFiltersAndRender();
    });
    </script>
</body>
</html>
